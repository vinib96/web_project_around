!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:String(r)}var n=function(){function e(t,r,n,o,i,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._data=t,this.owner=t.owner._id,this._cardId=t._id,this._likes=t.likes,this._cardSelector=r,this._handleClick=n,this._handleDeleteClick=o,this._handleAddLike=i,this._handleRemoveLike=u}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector("#cards").content.querySelector(".elements__cards").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this.likeClick(),this._remove(),this._element.querySelector(".elements__card-image").src=this._link,this._element.querySelector(".elements__card-image").alt=this._name,this._element.querySelector(".elements__text").textContent=this._name,this._element.querySelector(".elements__like-counter").textContent=this._likes.length,"65f3a68ef65151a656ade171"===this.owner&&this._element.querySelector(".elements__trash").classList.add("elements__trash_hidden"),this.isLiked()&&this._element.querySelector(".elements__like-button").classList.add("elements__like-button_click"),this._element}},{key:"removeElement",value:function(){this._element.remove()}},{key:"isLiked",value:function(){return this._likes.find((function(e){return"65f3a68ef65151a656ade171"===e._id}))}},{key:"likeClick",value:function(){var e=this,t=this._element.querySelector(".elements__like-button"),r=this._element.querySelector(".elements__like-counter");t.addEventListener("click",(function(){e.isLiked()?e._handleRemoveLike(e._cardId).then((function(n){t.classList.remove("elements__like-button_click"),e._likes=n.likes,r.textContent=e._likes.length})):e._handleAddLike(e._cardId).then((function(n){t.classList.add("elements__like-button_click");var o=e._element.querySelector(".elements__like-button_click");localStorage.setItem(o,like),r.textContent=parseInt(++e._likes.length),e._likes=n.likes}))}),(function(){var e=t.classList.add("elements__like-button_click");sessionStorage.getItem(e)}))}},{key:"_remove",value:function(){var e=this;this._element.querySelector(".elements__trash").addEventListener("click",(function(){e._handleDeleteClick()}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".elements__card-image").addEventListener("click",(function(){e._handleClick({link:e._link,name:e._name})}))}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(),o=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),u=document.querySelector(".popup_profile"),c=document.querySelector(".popup_add-cards"),a=document.querySelector(".popup__input_type_name"),l=document.querySelector(".popup__input_type_about"),s=(document.querySelector(".popup__input_type_picture"),document.querySelector(".popup_full")),f=document.querySelector(".elements__container"),p=document.querySelector(".popup_erase"),y=document.querySelector(".popup_changepic"),m=document.querySelector(".profile__pic-button");function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:String(t)}var d=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=r}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var r=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),r.textContent=t,r.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add("text-color"),e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?t.classList.add(this._config.inactiveButtonClass):t.classList.remove(this._config.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this,t=this._formElement.querySelector(this._config.submitButtonSelector),r=Array.from(this._formElement.querySelectorAll(this._config.inputSelector));this._toggleButtonState(r,t),r.forEach((function(n){n.addEventListener("input",(function(){e._checkInputValidity(n),e._toggleButtonState(r,t)}))}))}},{key:"enableValidation",value:function(){var e=this;Array.from(document.querySelectorAll(this._config.formSelector)).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e._formElement.querySelectorAll(".popup__formset")).forEach((function(t){e._setEventListeners(t)}))}))}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),v=new d({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},u),S=new d({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},c),g=new d({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},y);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:String(t)}S.enableValidation(),v.enableValidation(),g.enableValidation();var j=function(){function e(t){var r,n,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){"Escape"===e.key&&i.close()},(n=E(n="_handleEscClose"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._popupSelector=t,this.close=this.close.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupSelector.classList.add("popup__opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup__opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){this._popupSelector.querySelector(".popup__close-button").addEventListener("click",this.close),this._popupSelector.addEventListener("click",(function(e){e.target.classList.remove("popup__opened")}))}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:String(t)}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},C.apply(this,arguments)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(n);if(o){var r=I(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(r=[{key:"open",value:function(e,t){this._popupSelector.querySelector(".popup__image-large").src=e,this._popupSelector.querySelector(".popup__image-large").alt=t,this._popupSelector.querySelector(".popup__text-sub").textContent=t,C(I(u.prototype),"open",this).call(this)}},{key:"close",value:function(){C(I(u.prototype),"close",this).call(this)}}])&&O(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:String(t)}var B=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._class=r}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._class.append(e)}},{key:"clear",value:function(){this._class.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function V(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:String(t)}var F=function(){function e(t){var r=t.nameSelector,n=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(r),this._aboutElement=document.querySelector(n),this._avatarElement=document.querySelector(o)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e,t,r){this._nameElement.textContent=e,this._aboutElement.textContent=t,this._avatarElement.src=r}}])&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function J(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:String(t)}function M(){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},M.apply(this,arguments)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(n);if(o){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupSelector,n=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r))._handleFormSubmit=n,t._submitButton=t._popupSelector.querySelector(".popup__submit-button"),t}return t=u,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_renderLoading",value:function(e){e&&(this._submitButton.textContent="Salvando...")}},{key:"close",value:function(){M(G(u.prototype),"close",this).call(this),this._popupSelector.querySelector(".popup__form").reset()}},{key:"setEventListeners",value:function(){var e=this;M(G(u.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e._renderLoading(!0),e.close()}))}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function X(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Q(t)?t:String(t)}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Y.apply(this,arguments)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(o){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupSelector,n=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r))._handleFormSubmit=n,t}return t=u,(r=[{key:"open",value:function(e){this._card=e,Y($(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;Y($(u.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._card).then((function(){e.close()}))}))}}])&&W(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(j);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ne(n.key),n)}}function ne(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:String(t)}var oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,r;return t=e,r=[{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addCard",value:function(e){var t=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"editAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLikes",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeLikes",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}],r&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ie=new oe({baseUrl:"https://around.nomoreparties.co/v1/web_ptbr_08",headers:{authorization:"728f9375-e1ce-42d8-ae33-9e03a1e5fb11","Content-Type":"application/json"}}),ue=new T(s);ue.setEventListeners();var ce=new ee({popupSelector:p,handleFormSubmit:function(e){return ie.removeCard(e._cardId).then((function(){e.removeElement()})).catch((function(e){console.log(e)}))}});ce.setEventListeners();var ae=function(e){var t=new n(e,"#cards",(function(){ue.open(e.link,e.name)}),(function(){ce.open(t)}),ie.addLikes.bind(ie),ie.removeLikes.bind(ie));return t.generateCard()};ie.getInitialCards().then((function(e){var t=new B({items:e,renderer:function(e){t.addItem(ae(e))}},f);t.renderItems()})).catch((function(e){console.log(e)}));var le=new K({popupSelector:c,handleFormSubmit:function(){ie.addCard({name:document.querySelector(".popup__input_type_title").value,link:document.querySelector(".popup__input_type_image").value}).then((function(e){document.querySelector(".elements__container").prepend(ae(e))})).catch((function(e){console.log(e)}))}});le.setEventListeners(),i.addEventListener("click",(function(){le.open()}));var se=new F({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__picture"});ie.getUserInfo().then((function(e){var t=e.name,r=e.about,n=e.avatar;se.setUserInfo(t,r,n)})).catch((function(e){console.log(e)}));var fe=new K({popupSelector:u,handleFormSubmit:function(e){var t=e.name,r=e.about;ie.editUserInfo(t,r);var n=se.getUserInfo().avatar;se.setUserInfo(t,r,n)}});fe.setEventListeners(),o.addEventListener("click",(function(){var e=se.getUserInfo(),t=e.name,r=e.about;a.value=t,l.value=r,fe.open()}));var pe=new K({popupSelector:y,handleFormSubmit:function(e){var t=e.image;ie.editAvatar({avatar:document.querySelector(".popup__input_type_picture").value});var r=se.getUserInfo(),n=r.name,o=r.about;se.setUserInfo(n,o,t)}});pe.setEventListeners(),m.addEventListener("click",(function(){pe.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlMUMsRUFDZitFLGlCQUFrQixTQUFBOEQsR0FBZSxJQUFaaEUsRUFBS2dFLEVBQUxoRSxNQUNuQmlDLEdBQUlnQyxXQUFXLENBQ2I5SSxPQUFRMUMsU0FBU0MsY0FBYyw4QkFBOEJGLFFBRS9ELElBQUEwTCxFQUF3QlQsR0FBU0MsY0FBekIvTCxFQUFJdU0sRUFBSnZNLEtBQU1vSSxFQUFLbUUsRUFBTG5FLE1BQ2QwRCxHQUFTRSxZQUFZaE0sRUFBTW9JLEVBQU9DLEVBQ3BDLElBRUYrRCxHQUFXM0Isb0JBRVhoSCxFQUFVckIsaUJBQWlCLFNBQVMsV0FDbENnSyxHQUFXbEIsTUFDYixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVBZGRMaWtlLFxuICAgIGhhbmRsZVJlbW92ZUxpa2VcbiAgKSB7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMub3duZXIgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcblxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzXCIpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jYXJkc1wiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5saWtlQ2xpY2soKTtcblxuICAgIHRoaXMuX3JlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgY29uc3QgcmVtb3ZlID0gKCkgPT4ge1xuICAgICAgY29uc3QgbXlJZCA9IFwiNjVmM2E2OGVmNjUxNTFhNjU2YWRlMTcxXCI7XG4gICAgICBpZiAodGhpcy5vd25lciA9PT0gbXlJZCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX3RyYXNoXCIpXG4gICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fdHJhc2hfaGlkZGVuXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlbW92ZSgpO1xuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgY29uc3QgbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIik7XG4gICAgICBsaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fbGlrZS1idXR0b25fY2xpY2tcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICByZW1vdmVFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIGNvbnN0IG15SWQgPSBcIjY1ZjNhNjhlZjY1MTUxYTY1NmFkZTE3MVwiO1xuXG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLmZpbmQoKHJlcykgPT4gcmVzLl9pZCA9PT0gbXlJZCk7XG4gIH1cblxuICBsaWtlQ2xpY2soKSB7XG4gICAgY29uc3QgbGlrZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIik7XG5cbiAgICBjb25zdCBudW1iZXJPZkxpa2VzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRzX19saWtlLWNvdW50ZXJcIlxuICAgICk7XG5cbiAgICBjb25zdCBsaWtlZCA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0xpa2VkKCkpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlQWRkTGlrZSh0aGlzLl9jYXJkSWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGxpa2VCdG4uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19saWtlLWJ1dHRvbl9jbGlja1wiKTtcbiAgICAgICAgICBjb25zdCBhY3RpdmUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBcIi5lbGVtZW50c19fbGlrZS1idXR0b25fY2xpY2tcIlxuICAgICAgICAgICk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYWN0aXZlLCBsaWtlKTtcbiAgICAgICAgICBudW1iZXJPZkxpa2VzRWxlbWVudC50ZXh0Q29udGVudCA9IHBhcnNlSW50KCsrdGhpcy5fbGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVMaWtlKHRoaXMuX2NhcmRJZCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgbGlrZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2NsaWNrXCIpO1xuICAgICAgICAgIHRoaXMuX2xpa2VzID0gcmVzLmxpa2VzO1xuICAgICAgICAgIG51bWJlck9mTGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxpa2VkLCAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmUgPSBsaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fbGlrZS1idXR0b25fY2xpY2tcIik7XG4gICAgICBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGFjdGl2ZSk7XG4gICAgfSk7XG4gIH1cblxuICBfcmVtb3ZlKCkge1xuICAgIGNvbnN0IHRyYXNoQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190cmFzaFwiKTtcbiAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FyZC1pbWFnZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrKHtcbiAgICAgICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBvcGVuRm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3Qgb3BlbkFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfcHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfYWRkLWNhcmRzXCIpO1xuXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0QWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2Fib3V0XCIpO1xuZXhwb3J0IGNvbnN0IGlucHV0SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX3BpY3R1cmVcIik7XG5leHBvcnQgY29uc3QgZnVsbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9mdWxsXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRMaXN0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19jb250YWluZXJcIik7XG5cbmV4cG9ydCBjb25zdCBlcmFzZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9lcmFzZVwiKTtcblxuZXhwb3J0IGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfY2hhbmdlcGljXCIpO1xuZXhwb3J0IGNvbnN0IHBpY0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcGljLWJ1dHRvblwiKTtcbiIsImltcG9ydCB7IHBvcHVwLCBhZGRDYXJkcywgYXZhdGFyIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWNvbG9yXCIpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuZm9ybVNlbGVjdG9yKVxuICAgICk7XG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBmaWVsZHNldExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19mb3Jtc2V0XCIpXG4gICAgICApO1xuXG4gICAgICBmaWVsZHNldExpc3QuZm9yRWFjaCgoZmllbGRzZXQpID0+IHtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZmllbGRzZXQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuY29uc3QgcHJvZmlsZVZhbGlkID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHtcbiAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gICAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiLFxuICB9LFxuICBwb3B1cFxuKTtcblxuY29uc3QgYWRkVmFsaWQgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAge1xuICAgIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXG4gIH0sXG4gIGFkZENhcmRzXG4pO1xuXG5jb25zdCBwaWNWYWxpZCA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICB7XG4gICAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbiAgfSxcbiAgYXZhdGFyXG4pO1xuXG5hZGRWYWxpZC5lbmFibGVWYWxpZGF0aW9uKCk7XG5wcm9maWxlVmFsaWQuZW5hYmxlVmFsaWRhdGlvbigpO1xucGljVmFsaWQuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZChcInBvcHVwX19vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICAgIGZ1bmN0aW9uIG9uQ2xpY2soZXZ0KSB7XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fb3BlbmVkXCIpO1xuICAgIH1cbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvbkNsaWNrKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLWxhcmdlXCIpLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1sYXJnZVwiKS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGV4dC1zdWJcIikudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jbGFzcyA9IGNhcmRTZWxlY3RvcjtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NsYXNzLmFwcGVuZChlbGVtZW50KTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuX2NsYXNzLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG4gIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0LCBpbWFnZSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGltYWdlO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiXG4gICAgKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcblxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBfcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhbHZhbmRvLi4uXCI7XG4gICAgfVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIikucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX3JlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBvcGVuKGNhcmQpIHtcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkKS50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuICBlZGl0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZWRpdEF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXIgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUxpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcbmltcG9ydCB7XG4gIHBvcHVwLFxuICBhZGRDYXJkcyxcbiAgY2FyZExpc3RTZWxlY3RvcixcbiAgb3BlbkFkZEJ1dHRvbixcbiAgb3BlbkZvcm1CdXR0b24sXG4gIGZ1bGxJbWFnZSxcbiAgaW5wdXRBYm91dCxcbiAgaW5wdXROYW1lLFxuICBlcmFzZVBvcHVwLFxuICBhdmF0YXIsXG4gIHBpY0J1dHRvbixcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9wdGJyXzA4XCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjcyOGY5Mzc1LWUxY2UtNDJkOC1hZTMzLTllMDNhMWU1ZmIxMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGZ1bGxJbWFnZSk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBmb3JtQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XG4gIHBvcHVwU2VsZWN0b3I6IGVyYXNlUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChjYXJkKSA9PiB7XG4gICAgcmV0dXJuIGFwaVxuICAgICAgLnJlbW92ZUNhcmQoY2FyZC5fY2FyZElkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnJlbW92ZUVsZW1lbnQoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0sXG59KTtcbmZvcm1Db25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcmVuZGVyTmV3Q2FyZCA9IChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBpdGVtLFxuICAgIFwiI2NhcmRzXCIsXG4gICAgKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgfSxcbiAgICAoKSA9PiB7XG4gICAgICBmb3JtQ29uZmlybWF0aW9uLm9wZW4oY2FyZCk7XG4gICAgfSxcbiAgICBhcGkuYWRkTGlrZXMuYmluZChhcGkpLFxuICAgIGFwaS5yZW1vdmVMaWtlcy5iaW5kKGFwaSlcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICBjb25zdCBkZWZhdWx0Q2FyZExpc3QgPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IHJlc3VsdCxcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgZGVmYXVsdENhcmRMaXN0LmFkZEl0ZW0ocmVuZGVyTmV3Q2FyZChpdGVtKSk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgY2FyZExpc3RTZWxlY3RvclxuICAgICk7XG4gICAgZGVmYXVsdENhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGZvcm1BZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBhZGRDYXJkcyxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmFkZENhcmQoe1xuICAgICAgICBuYW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlXCIpLnZhbHVlLFxuICAgICAgICBsaW5rOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2ltYWdlXCIpLnZhbHVlLFxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY29udGFpbmVyXCIpXG4gICAgICAgICAgLnByZXBlbmQocmVuZGVyTmV3Q2FyZChyZXN1bHQpKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH0sXG59KTtcbmZvcm1BZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5vcGVuQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1BZGRDYXJkLm9wZW4oKTtcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19hYm91dFwiLFxuICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fcGljdHVyZVwiLFxufSk7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhuYW1lLCBhYm91dCwgYXZhdGFyKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuY29uc3QgZm9ybVByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoeyBuYW1lLCBhYm91dCB9KSA9PiB7XG4gICAgYXBpLmVkaXRVc2VySW5mbyhuYW1lLCBhYm91dCk7XG4gICAgY29uc3QgeyBhdmF0YXIgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGF2YXRhcik7XG4gIH0sXG59KTtcbmZvcm1Qcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5vcGVuRm9ybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBuYW1lO1xuICBpbnB1dEFib3V0LnZhbHVlID0gYWJvdXQ7XG5cbiAgZm9ybVByb2ZpbGUub3BlbigpO1xufSk7XG5cbmNvbnN0IGF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IGF2YXRhcixcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHsgaW1hZ2UgfSkgPT4ge1xuICAgIGFwaS5lZGl0QXZhdGFyKHtcbiAgICAgIGF2YXRhcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZV9waWN0dXJlXCIpLnZhbHVlLFxuICAgIH0pO1xuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8obmFtZSwgYWJvdXQsIGltYWdlKTtcbiAgfSxcbn0pO1xuYXZhdGFyRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5waWNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYXZhdGFyRm9ybS5vcGVuKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlQWRkTGlrZSIsImhhbmRsZVJlbW92ZUxpa2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xpbmsiLCJsaW5rIiwiX25hbWUiLCJuYW1lIiwiX2RhdGEiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlQWRkTGlrZSIsIl9oYW5kbGVSZW1vdmVMaWtlIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJsaWtlQ2xpY2siLCJfcmVtb3ZlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0xpa2VkIiwicmVtb3ZlIiwiZmluZCIsInJlcyIsIl90aGlzMiIsImxpa2VCdG4iLCJudW1iZXJPZkxpa2VzRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGVuIiwiYWN0aXZlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImxpa2UiLCJwYXJzZUludCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsIl90aGlzMyIsIl90aGlzNCIsIm9wZW5Gb3JtQnV0dG9uIiwib3BlbkFkZEJ1dHRvbiIsInBvcHVwIiwiYWRkQ2FyZHMiLCJpbnB1dE5hbWUiLCJpbnB1dEFib3V0IiwiZnVsbEltYWdlIiwiY2FyZExpc3RTZWxlY3RvciIsImVyYXNlUG9wdXAiLCJhdmF0YXIiLCJwaWNCdXR0b24iLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsImJ1dHRvbkVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl90aGlzIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZm9ybVNlbGVjdG9yIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJmaWVsZHNldCIsInByb2ZpbGVWYWxpZCIsImFkZFZhbGlkIiwicGljVmFsaWQiLCJlbmFibGVWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiY2xvc2UiLCJfcG9wdXBTZWxlY3RvciIsImJpbmQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJjYWxsIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlNlY3Rpb24iLCJfcmVmIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NsYXNzIiwiZWxlbWVudCIsImFwcGVuZCIsImlubmVySFRNTCIsImNsZWFyIiwiaXRlbSIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiYWJvdXQiLCJpbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJpc0xvYWRpbmciLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9yZW5kZXJMb2FkaW5nIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiY2FyZCIsIl9jYXJkIiwiQXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsImZldGNoIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3JlZjIiLCJjYXJkSWQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwicG9wdXBXaXRoSW1hZ2UiLCJzZXRFdmVudExpc3RlbmVycyIsImZvcm1Db25maXJtYXRpb24iLCJyZW1vdmVDYXJkIiwicmVtb3ZlRWxlbWVudCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInJlbmRlck5ld0NhcmQiLCJvcGVuIiwiYWRkTGlrZXMiLCJyZW1vdmVMaWtlcyIsImdlbmVyYXRlQ2FyZCIsImdldEluaXRpYWxDYXJkcyIsInJlc3VsdCIsImRlZmF1bHRDYXJkTGlzdCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImZvcm1BZGRDYXJkIiwiYWRkQ2FyZCIsInByZXBlbmQiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJmb3JtUHJvZmlsZSIsImVkaXRVc2VySW5mbyIsIl91c2VySW5mbyRnZXRVc2VySW5mbzIiLCJhdmF0YXJGb3JtIiwiX3JlZjMiLCJlZGl0QXZhdGFyIiwiX3VzZXJJbmZvJGdldFVzZXJJbmZvMyJdLCJzb3VyY2VSb290IjoiIn0=